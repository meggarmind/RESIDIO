-- ============================================================================
-- FIXTURE: Payment Records
-- 60 payment records with various methods and matching scenarios
-- Distribution: bank_transfer (30), cash (15), pos (10), cheque (5)
-- ============================================================================

-- Reference IDs:
-- Residents: aa000001-0001-0001-0001-000000000001 to 000000000055
-- Invoices: hh000001-0001-0001-0001-000000000001 to 000000000120

-- ============================================================================
-- BANK TRANSFER PAYMENTS (30 total)
-- Most common payment method for estate dues
-- ============================================================================

-- Bank transfers for paid invoices (exact matches)
INSERT INTO public.payment_records (id, resident_id, amount, payment_date, period_start, period_end, status, method, reference_number, notes, created_at) VALUES
  -- January 2025 payments
  ('jj000001-0001-0001-0001-000000000001', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-02-10', '2025-01-01', '2025-01-31', 'paid', 'bank_transfer', 'TRF/001/2025', 'Service charge payment - Oluwaseun Adeyemi', '2025-02-10'),
  ('jj000001-0001-0001-0001-000000000002', 'aa000001-0001-0001-0001-000000000002', 15000, '2025-02-12', '2025-01-01', '2025-01-31', 'paid', 'bank_transfer', 'TRF/002/2025', 'Chidinma Okonkwo - Jan dues', '2025-02-12'),
  ('jj000001-0001-0001-0001-000000000003', 'aa000001-0001-0001-0001-000000000003', 15000, '2025-02-08', '2025-01-01', '2025-01-31', 'paid', 'bank_transfer', 'TRF/003/2025', 'OAK-3 monthly payment', '2025-02-08'),
  ('jj000001-0001-0001-0001-000000000004', 'aa000001-0001-0001-0001-000000000009', 15000, '2025-02-05', '2025-01-01', '2025-01-31', 'paid', 'bank_transfer', 'TRF/004/2025', 'PALM 1 Dues', '2025-02-05'),
  ('jj000001-0001-0001-0001-000000000005', 'aa000001-0001-0001-0001-000000000010', 15000, '2025-02-14', '2025-01-01', '2025-01-31', 'paid', 'bank_transfer', 'TRF/005/2025', 'Palm Close 2 payment', '2025-02-14'),

  -- February 2025 payments
  ('jj000001-0001-0001-0001-000000000006', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-03-10', '2025-02-01', '2025-02-28', 'paid', 'bank_transfer', 'TRF/006/2025', 'Feb payment - Adeyemi', '2025-03-10'),
  ('jj000001-0001-0001-0001-000000000007', 'aa000001-0001-0001-0001-000000000002', 15000, '2025-03-08', '2025-02-01', '2025-02-28', 'paid', 'bank_transfer', 'TRF/007/2025', 'Chidinma O payment', '2025-03-08'),
  ('jj000001-0001-0001-0001-000000000008', 'aa000001-0001-0001-0001-000000000004', 15000, '2025-03-12', '2025-02-01', '2025-02-28', 'paid', 'bank_transfer', 'TRF/008/2025', 'OAK 4 FEB DUES', '2025-03-12'),
  ('jj000001-0001-0001-0001-000000000009', 'aa000001-0001-0001-0001-000000000005', 25000, '2025-03-05', '2025-02-01', '2025-02-28', 'paid', 'bank_transfer', 'TRF/009/2025', 'OAK 5A Premium Monthly', '2025-03-05'),
  ('jj000001-0001-0001-0001-000000000010', 'aa000001-0001-0001-0001-000000000011', 25000, '2025-03-14', '2025-02-01', '2025-02-28', 'paid', 'bank_transfer', 'TRF/010/2025', 'PALM-7 Penthouse dues', '2025-03-14'),

  -- March-April 2025 payments
  ('jj000001-0001-0001-0001-000000000011', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-04-10', '2025-03-01', '2025-03-31', 'paid', 'bank_transfer', 'TRF/011/2025', 'March dues Adeyemi O', '2025-04-10'),
  ('jj000001-0001-0001-0001-000000000012', 'aa000001-0001-0001-0001-000000000002', 15000, '2025-04-08', '2025-03-01', '2025-03-31', 'paid', 'bank_transfer', 'TRF/012/2025', 'Okonkwo C march', '2025-04-08'),
  ('jj000001-0001-0001-0001-000000000013', 'aa000001-0001-0001-0001-000000000003', 15000, '2025-04-12', '2025-03-01', '2025-03-31', 'paid', 'bank_transfer', 'TRF/013/2025', 'B. Williams OAK-3', '2025-04-12'),
  ('jj000001-0001-0001-0001-000000000014', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-05-10', '2025-04-01', '2025-04-30', 'paid', 'bank_transfer', 'TRF/014/2025', 'Apr payment Seun', '2025-05-10'),
  ('jj000001-0001-0001-0001-000000000015', 'aa000001-0001-0001-0001-000000000002', 15000, '2025-05-08', '2025-04-01', '2025-04-30', 'paid', 'bank_transfer', 'TRF/015/2025', 'Chidinma April', '2025-05-08'),

  -- May-August 2025 payments
  ('jj000001-0001-0001-0001-000000000016', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-06-10', '2025-05-01', '2025-05-31', 'paid', 'bank_transfer', 'TRF/016/2025', 'May dues OAK-1', '2025-06-10'),
  ('jj000001-0001-0001-0001-000000000017', 'aa000001-0001-0001-0001-000000000006', 15000, '2025-06-05', '2025-05-01', '2025-05-31', 'paid', 'bank_transfer', 'TRF/017/2025', 'Funmilayo Ogundimu May', '2025-06-05'),
  ('jj000001-0001-0001-0001-000000000018', 'aa000001-0001-0001-0001-000000000007', 25000, '2025-06-14', '2025-05-01', '2025-05-31', 'paid', 'bank_transfer', 'TRF/018/2025', 'CED-1 Premium Nwankwo', '2025-06-14'),
  ('jj000001-0001-0001-0001-000000000019', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-07-10', '2025-06-01', '2025-06-30', 'paid', 'bank_transfer', 'TRF/019/2025', 'June payment Adeyemi', '2025-07-10'),
  ('jj000001-0001-0001-0001-000000000020', 'aa000001-0001-0001-0001-000000000002', 15000, '2025-07-08', '2025-06-01', '2025-06-30', 'paid', 'bank_transfer', 'TRF/020/2025', 'C Okonkwo June 2025', '2025-07-08'),

  -- September-December 2025 payments
  ('jj000001-0001-0001-0001-000000000021', 'aa000001-0001-0001-0001-000000000001', 15000, '2025-08-10', '2025-07-01', '2025-07-31', 'paid', 'bank_transfer', 'TRF/021/2025', 'July OAK-1', '2025-08-10'),
  ('jj000001-0001-0001-0001-000000000022', 'aa000001-0001-0001-0001-000000000005', 25000, '2025-10-10', '2025-09-01', '2025-09-30', 'paid', 'bank_transfer', 'TRF/022/2025', 'Sep premium Mohammed', '2025-10-10'),
  ('jj000001-0001-0001-0001-000000000023', 'aa000001-0001-0001-0001-000000000007', 25000, '2025-11-10', '2025-10-01', '2025-10-31', 'paid', 'bank_transfer', 'TRF/023/2025', 'CED-1 Oct Emeka N', '2025-11-10'),
  ('jj000001-0001-0001-0001-000000000024', 'aa000001-0001-0001-0001-000000000008', 25000, '2025-11-08', '2025-10-01', '2025-10-31', 'paid', 'bank_transfer', 'TRF/024/2025', 'CED-2 Amaka Okoro Oct', '2025-11-08'),
  ('jj000001-0001-0001-0001-000000000025', 'aa000001-0001-0001-0001-000000000009', 15000, '2025-12-10', '2025-11-01', '2025-11-30', 'paid', 'bank_transfer', 'TRF/025/2025', 'PALM-1 Nov Igwe', '2025-12-10'),

  -- December 2025 / January 2026 payments
  ('jj000001-0001-0001-0001-000000000026', 'aa000001-0001-0001-0001-000000000001', 15000, '2026-01-05', '2025-12-01', '2025-12-31', 'paid', 'bank_transfer', 'TRF/001/2026', 'Dec 2025 OAK-1', '2026-01-05'),
  ('jj000001-0001-0001-0001-000000000027', 'aa000001-0001-0001-0001-000000000002', 15000, '2026-01-03', '2025-12-01', '2025-12-31', 'paid', 'bank_transfer', 'TRF/002/2026', 'December Chidinma', '2026-01-03'),
  ('jj000001-0001-0001-0001-000000000028', 'aa000001-0001-0001-0001-000000000003', 15000, '2026-01-07', '2025-12-01', '2025-12-31', 'paid', 'bank_transfer', 'TRF/003/2026', 'Williams Dec dues', '2026-01-07'),
  ('jj000001-0001-0001-0001-000000000029', 'aa000001-0001-0001-0001-000000000004', 15000, '2026-01-02', '2025-12-01', '2025-12-31', 'paid', 'bank_transfer', 'TRF/004/2026', 'OAK-4 Dec Ngozi E', '2026-01-02'),
  ('jj000001-0001-0001-0001-000000000030', 'aa000001-0001-0001-0001-000000000005', 25000, '2026-01-04', '2025-12-01', '2025-12-31', 'paid', 'bank_transfer', 'TRF/005/2026', 'OAK-5A December premium', '2026-01-04')
ON CONFLICT (id) DO UPDATE SET
  amount = EXCLUDED.amount,
  status = EXCLUDED.status,
  reference_number = EXCLUDED.reference_number;

-- ============================================================================
-- CASH PAYMENTS (15 total)
-- Physical cash payments at estate office
-- ============================================================================
INSERT INTO public.payment_records (id, resident_id, amount, payment_date, period_start, period_end, status, method, reference_number, notes, created_at) VALUES
  -- Regular cash payments
  ('jj000001-0001-0001-0001-000000000031', 'aa000001-0001-0001-0001-000000000021', 15000, '2025-10-18', '2025-10-01', '2025-10-31', 'paid', 'cash', 'CSH/001/2025', 'Cash payment Temitope Adegoke', '2025-10-18'),
  ('jj000001-0001-0001-0001-000000000032', 'aa000001-0001-0001-0001-000000000022', 15000, '2025-10-20', '2025-10-01', '2025-10-31', 'paid', 'cash', 'CSH/002/2025', 'Ifeanyi C cash at office', '2025-10-20'),
  ('jj000001-0001-0001-0001-000000000033', 'aa000001-0001-0001-0001-000000000023', 25000, '2025-11-10', '2025-11-01', '2025-11-30', 'paid', 'cash', 'CSH/003/2025', 'Bolaji Oladipo premium cash', '2025-11-10'),
  ('jj000001-0001-0001-0001-000000000034', 'aa000001-0001-0001-0001-000000000024', 25000, '2025-11-12', '2025-11-01', '2025-11-30', 'paid', 'cash', 'CSH/004/2025', 'Chioma E cash payment', '2025-11-12'),
  ('jj000001-0001-0001-0001-000000000035', 'aa000001-0001-0001-0001-000000000025', 25000, '2025-11-15', '2025-11-01', '2025-11-30', 'paid', 'cash', 'CSH/005/2025', 'OAK-5B Segun Alabi', '2025-11-15'),

  -- Partial cash payments (for partially_paid invoices)
  ('jj000001-0001-0001-0001-000000000036', 'aa000001-0001-0001-0001-000000000021', 10000, '2025-11-05', '2025-10-01', '2025-10-31', 'paid', 'cash', 'CSH/006/2025', 'Partial cash Adegoke Oct', '2025-11-05'),
  ('jj000001-0001-0001-0001-000000000037', 'aa000001-0001-0001-0001-000000000022', 8000, '2025-11-08', '2025-10-01', '2025-10-31', 'paid', 'cash', 'CSH/007/2025', 'Partial Ifeanyi Oct balance', '2025-11-08'),
  ('jj000001-0001-0001-0001-000000000038', 'aa000001-0001-0001-0001-000000000026', 7500, '2025-12-20', '2025-12-01', '2025-12-31', 'paid', 'cash', 'CSH/008/2025', 'Half payment Adaobi N', '2025-12-20'),
  ('jj000001-0001-0001-0001-000000000039', 'aa000001-0001-0001-0001-000000000027', 5000, '2025-12-22', '2025-12-01', '2025-12-31', 'paid', 'cash', 'CSH/009/2025', 'Part payment Kolawole', '2025-12-22'),
  ('jj000001-0001-0001-0001-000000000040', 'aa000001-0001-0001-0001-000000000028', 10000, '2025-12-28', '2025-12-01', '2025-12-31', 'paid', 'cash', 'CSH/010/2025', 'Chiamaka partial Dec', '2025-12-28'),

  -- Recent cash payments
  ('jj000001-0001-0001-0001-000000000041', 'aa000001-0001-0001-0001-000000000010', 15000, '2025-12-08', '2025-11-01', '2025-11-30', 'paid', 'cash', 'CSH/011/2025', 'Adaeze Obi Nov cash', '2025-12-08'),
  ('jj000001-0001-0001-0001-000000000042', 'aa000001-0001-0001-0001-000000000011', 25000, '2025-12-12', '2025-11-01', '2025-11-30', 'paid', 'cash', 'CSH/012/2025', 'Olumide Akinola premium', '2025-12-12'),
  ('jj000001-0001-0001-0001-000000000043', 'aa000001-0001-0001-0001-000000000012', 25000, '2025-12-05', '2025-11-01', '2025-11-30', 'paid', 'cash', 'CSH/013/2025', 'Blessing Udo PALM-10', '2025-12-05'),
  ('jj000001-0001-0001-0001-000000000044', 'aa000001-0001-0001-0001-000000000006', 15000, '2026-01-06', '2025-12-01', '2025-12-31', 'paid', 'cash', 'CSH/001/2026', 'Funmi O December', '2026-01-06'),
  ('jj000001-0001-0001-0001-000000000045', 'aa000001-0001-0001-0001-000000000007', 25000, '2026-01-08', '2025-12-01', '2025-12-31', 'paid', 'cash', 'CSH/002/2026', 'Emeka N Dec premium', '2026-01-08')
ON CONFLICT (id) DO UPDATE SET
  amount = EXCLUDED.amount,
  status = EXCLUDED.status,
  reference_number = EXCLUDED.reference_number;

-- ============================================================================
-- POS PAYMENTS (10 total)
-- Point of sale card payments at estate office
-- ============================================================================
INSERT INTO public.payment_records (id, resident_id, amount, payment_date, period_start, period_end, status, method, reference_number, notes, created_at) VALUES
  ('jj000001-0001-0001-0001-000000000046', 'aa000001-0001-0001-0001-000000000004', 15000, '2025-05-12', '2025-04-01', '2025-04-30', 'paid', 'pos', 'POS/001/2025', 'POS payment Ngozi Eze', '2025-05-12'),
  ('jj000001-0001-0001-0001-000000000047', 'aa000001-0001-0001-0001-000000000009', 15000, '2025-04-05', '2025-03-01', '2025-03-31', 'paid', 'pos', 'POS/002/2025', 'Card payment Igwe March', '2025-04-05'),
  ('jj000001-0001-0001-0001-000000000048', 'aa000001-0001-0001-0001-000000000010', 15000, '2025-04-14', '2025-03-01', '2025-03-31', 'paid', 'pos', 'POS/003/2025', 'POS Adaeze Mar', '2025-04-14'),
  ('jj000001-0001-0001-0001-000000000049', 'aa000001-0001-0001-0001-000000000005', 25000, '2025-05-05', '2025-04-01', '2025-04-30', 'paid', 'pos', 'POS/004/2025', 'Ibrahim M card premium', '2025-05-05'),
  ('jj000001-0001-0001-0001-000000000050', 'aa000001-0001-0001-0001-000000000012', 25000, '2025-05-14', '2025-04-01', '2025-04-30', 'paid', 'pos', 'POS/005/2025', 'Blessing U POS April', '2025-05-14'),
  ('jj000001-0001-0001-0001-000000000051', 'aa000001-0001-0001-0001-000000000006', 15000, '2025-09-08', '2025-09-01', '2025-09-30', 'paid', 'pos', 'POS/006/2025', 'Funmilayo Sep card', '2025-09-08'),
  ('jj000001-0001-0001-0001-000000000052', 'aa000001-0001-0001-0001-000000000008', 25000, '2026-01-01', '2025-12-01', '2025-12-31', 'paid', 'pos', 'POS/001/2026', 'Amaka O Dec POS premium', '2026-01-01'),
  ('jj000001-0001-0001-0001-000000000053', 'aa000001-0001-0001-0001-000000000021', 11000, '2026-01-03', '2026-01-01', '2026-01-31', 'paid', 'pos', 'POS/002/2026', 'Partial Jan Temitope', '2026-01-03'),
  ('jj000001-0001-0001-0001-000000000054', 'aa000001-0001-0001-0001-000000000022', 4000, '2026-01-04', '2026-01-01', '2026-01-31', 'paid', 'pos', 'POS/003/2026', 'Part payment Ifeanyi Jan', '2026-01-04'),
  ('jj000001-0001-0001-0001-000000000055', 'aa000001-0001-0001-0001-000000000023', 17000, '2026-01-05', '2026-01-01', '2026-01-31', 'paid', 'pos', 'POS/004/2026', 'Partial Bolaji premium', '2026-01-05')
ON CONFLICT (id) DO UPDATE SET
  amount = EXCLUDED.amount,
  status = EXCLUDED.status,
  reference_number = EXCLUDED.reference_number;

-- ============================================================================
-- CHEQUE PAYMENTS (5 total)
-- Less common but used by corporate entities
-- ============================================================================
INSERT INTO public.payment_records (id, resident_id, amount, payment_date, period_start, period_end, status, method, reference_number, notes, created_at) VALUES
  -- Corporate entity payments
  ('jj000001-0001-0001-0001-000000000056', 'aa000001-0001-0001-0001-000000000051', 15000, '2025-10-15', '2025-10-01', '2025-10-31', 'paid', 'cheque', 'CHQ/001/2025', 'Sunshine Properties Ltd cheque', '2025-10-15'),
  ('jj000001-0001-0001-0001-000000000057', 'aa000001-0001-0001-0001-000000000052', 25000, '2025-11-18', '2025-11-01', '2025-11-30', 'paid', 'cheque', 'CHQ/002/2025', 'Golden Gate Investments cheque', '2025-11-18'),
  ('jj000001-0001-0001-0001-000000000058', 'aa000001-0001-0001-0001-000000000031', 50000, '2025-09-20', '2025-09-01', '2025-09-30', 'paid', 'cheque', 'CHQ/003/2025', 'Commercial unit CED-5 cheque', '2025-09-20'),
  ('jj000001-0001-0001-0001-000000000059', 'aa000001-0001-0001-0001-000000000051', 15000, '2025-12-12', '2025-12-01', '2025-12-31', 'paid', 'cheque', 'CHQ/004/2025', 'Sunshine Props Dec cheque', '2025-12-12'),
  ('jj000001-0001-0001-0001-000000000060', 'aa000001-0001-0001-0001-000000000052', 25000, '2026-01-06', '2026-01-01', '2026-01-31', 'paid', 'cheque', 'CHQ/001/2026', 'Golden Gate Jan cheque', '2026-01-06')
ON CONFLICT (id) DO UPDATE SET
  amount = EXCLUDED.amount,
  status = EXCLUDED.status,
  reference_number = EXCLUDED.reference_number;

-- ============================================================================
-- PAYMENT MATCHING TEST DATA
-- Payments with various sender name patterns for reconciliation testing
-- ============================================================================

-- Note: These payments already include various matching patterns:
-- 1. Exact name match: "Oluwaseun Adeyemi", "Chidinma Okonkwo"
-- 2. First name only: "Chidinma", "Temitope"
-- 3. Last name only: "Adeyemi", "Williams"
-- 4. Initials: "C Okonkwo", "B. Williams"
-- 5. House reference: "OAK-1", "PALM 1", "CED-1"
-- 6. Combined: "OAK-4 Dec Ngozi E"
-- 7. Corporate: "Sunshine Properties Ltd", "Golden Gate Investments"

-- ============================================================================
-- VERIFICATION
-- ============================================================================
DO $$
DECLARE
  v_total INT;
  v_bank INT;
  v_cash INT;
  v_pos INT;
  v_cheque INT;
  v_total_amount NUMERIC;
BEGIN
  SELECT COUNT(*) INTO v_total FROM payment_records WHERE id LIKE 'jj000001-%';
  SELECT COUNT(*) INTO v_bank FROM payment_records WHERE method = 'bank_transfer' AND id LIKE 'jj000001-%';
  SELECT COUNT(*) INTO v_cash FROM payment_records WHERE method = 'cash' AND id LIKE 'jj000001-%';
  SELECT COUNT(*) INTO v_pos FROM payment_records WHERE method = 'pos' AND id LIKE 'jj000001-%';
  SELECT COUNT(*) INTO v_cheque FROM payment_records WHERE method = 'cheque' AND id LIKE 'jj000001-%';
  SELECT COALESCE(SUM(amount), 0) INTO v_total_amount FROM payment_records WHERE id LIKE 'jj000001-%';

  RAISE NOTICE 'Payment Records Created:';
  RAISE NOTICE '  Total Payments: %', v_total;
  RAISE NOTICE '  Bank Transfer: %', v_bank;
  RAISE NOTICE '  Cash: %', v_cash;
  RAISE NOTICE '  POS: %', v_pos;
  RAISE NOTICE '  Cheque: %', v_cheque;
  RAISE NOTICE '  Total Amount: %', v_total_amount;
END $$;
